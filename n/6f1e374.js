(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{265:function(e,l,t){var content=t(268);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,t(38).default)("0faa4b99",content,!0,{sourceMap:!1})},266:function(e,l,t){var content=t(270);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,t(38).default)("0ace817b",content,!0,{sourceMap:!1})},267:function(e,l,t){"use strict";t(265)},268:function(e,l,t){var n=t(37)(!1);n.push([e.i,".game-field{position:relative;display:flex;flex-wrap:wrap;width:640px;height:640px;margin:auto}.game-cell{display:flex;justify-content:center;align-items:center;width:80px;height:80px;transform:translateZ(0)}.game-cell-move{transition:transform .3s ease}.game-cell svg{position:relative;width:60px;height:60px;touch-action:none;z-index:2}",""]),e.exports=n},269:function(e,l,t){"use strict";t(266)},270:function(e,l,t){var n=t(37)(!1);n.push([e.i,"",""]),e.exports=n},273:function(e,l,t){"use strict";t.r(l);var n=t(26);t(72),t(39),t(46),t(31),t(40),t(12),t(60),t(32),t(61);function r(object,e){var l=Object.keys(object);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(object);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),l.push.apply(l,t)}return l}function c(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?r(Object(source),!0).forEach((function(l){Object(n.a)(e,l,source[l])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):r(Object(source)).forEach((function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(source,l))}))}return e}var o={name:"Game",data:function(){return{field:{width:8,height:8,startGrid:"................................................................",availableTiles:[{value:1,name:"aqua",icon:"icon-aqua"},{value:2,name:"marine",icon:"icon-marine"},{value:3,name:"fubuki",icon:"icon-fubuki"},{value:4,name:"noel",icon:"icon-noel"},{value:5,name:"korone",icon:"icon-korone"}],cells:[],pickedCell:null,cellsInStreak:[]},game:{status:"loading",score:0}}},methods:{mouseDown:function(e){this.field.pickedCell=e,this.game.status="picked"},mouseUp:function(e){var l=this;Math.abs(e.x-this.field.pickedCell.x)+Math.abs(e.y-this.field.pickedCell.y)===1?(this.swapTwoCells(this.field.pickedCell,e),setTimeout((function(){l.isFieldHasStreaks()?(l.game.status="falling",l.removeStreaks()):l.swapTwoCells(l.field.pickedCell,e),l.field.pickedCell=null,l.game.status="picking"}),300)):(console.log("no"),this.field.pickedCell=null,this.game.status="picking")},generateCells:function(){for(var i=0;i<this.field.width;i++)for(var e=0;e<this.field.height;e++){var l={id:i*this.field.height+e,key:i*this.field.height+e,x:e,y:i,icon:"",value:""};do{var t=this.field.availableTiles[Math.floor(Math.random()*this.field.availableTiles.length)];l.icon=t.icon,l.value=t.value,l.name=t.name}while(this.isCellInStreak(l));this.field.cells.push(l)}this.game.status="picking"},setRandomCell:function(e){var l=this.field.availableTiles[Math.floor(Math.random()*this.field.availableTiles.length)];this.field.cells[e].icon=l.icon,this.field.cells[e].value=l.value,this.field.cells[e].name=l.name},isCellInVerticalStreak:function(e){for(var l=0,t=0,n=e.y-1;n>=0&&this.field.cells[e.id-(l+1)*this.field.width]&&this.field.cells[e.id-(l+1)*this.field.width].value===e.value;)l++,n--;for(n=e.y+1;n<this.field.height&&this.field.cells[e.id+(t+1)*this.field.width]&&this.field.cells[e.id+(t+1)*this.field.width].value===e.value;)t++,n++;return l+t>1},isCellInHorizontalStreak:function(e){for(var l=0,t=0,n=e.x-1;n>=0&&this.field.cells[e.id-l-1]&&this.field.cells[e.id-l-1].value===e.value;)l++,n--;for(n=e.x+1;n<this.field.width&&this.field.cells[e.id+t+1]&&this.field.cells[e.id+t+1].value===e.value;)t++,n++;return l+t>1},isCellInStreak:function(e){return this.isCellInVerticalStreak(e)||this.isCellInHorizontalStreak(e)},isFieldHasStreaks:function(){this.field.cellsInStreak=[];for(var i=0;i<this.field.cells.length;i++)this.isCellInStreak(this.field.cells[i])&&this.field.cellsInStreak.push(this.field.cells[i]);return!!this.field.cellsInStreak.length},removeStreaks:function(){if(this.field.cellsInStreak.length){for(var e=this.field.cellsInStreak.length,i=0;i<e;i++)this.field.cells[this.field.cellsInStreak[i].id].value=-1,this.field.cells[this.field.cellsInStreak[i].id].name="empty",this.field.cells[this.field.cellsInStreak[i].id].icon=null;this.cellsFalling()}},swapTwoCells:function(e,l){var t=c({},e),n=c({},l);this.field.cells[t.id].x=n.x,this.field.cells[t.id].y=n.y,this.field.cells[t.id].id=n.id,this.field.cells[n.id].x=t.x,this.field.cells[n.id].y=t.y,this.field.cells[n.id].id=t.id;var r=[this.field.cells[n.id],this.field.cells[t.id]];this.field.cells[t.id]=r[0],this.field.cells[n.id]=r[1]},isFieldHasEmpties:function(){for(var e=this.field.cells.length,i=0;i<e;i++)if(-1===this.field.cells[i].value)return!0;return!1},cellsFalling:function(){for(var e=this,l=(this.field.cells.length,this.field.height),t=this.field.width,i=0;i<t;i++)for(var n=l-1;n>=0;n--)if(-1===this.field.cells[n*t+i].value){for(var r=!1,c=n-1;c>=0;c--)if(-1!==this.field.cells[c*t+i].value){r=!0,this.swapTwoCells(this.field.cells[n*t+i],this.field.cells[c*t+i]);break}if(!r)break}setTimeout((function(){for(var l=0;l<e.field.cells.length;l++)-1===e.field.cells[l].value&&e.setRandomCell(l);setTimeout((function(){e.isFieldHasStreaks()&&e.removeStreaks()}),300)}),300)}},mounted:function(){this.generateCells()}},d=(t(267),t(25)),f={name:"IndexPage",components:{Game:Object(d.a)(o,(function(){var e=this,l=e.$createElement,t=e._self._c||l;return t("div",{class:["game",e.game.status]},[t("transition-group",{staticClass:"game-field",attrs:{name:"game-cell",tag:"div"}},e._l(e.field.cells,(function(l){return t("div",{key:l.key,class:["game-cell",{picked:e.field.pickedCell&&e.field.pickedCell.id===l.id}],on:{mousedown:function(t){return e.mouseDown(l)},mouseup:function(t){return e.mouseUp(l)}}},[l.icon?t("svg",{class:l.icon},[t("use",{attrs:{"xlink:href":"icons/all.svg#"+l.icon}})]):e._e()])})),0)],1)}),[],!1,null,null,null).exports}},h=(t(269),Object(d.a)(f,(function(){var e=this.$createElement,l=this._self._c||e;return l("div",{staticClass:"page"},[l("Game")],1)}),[],!1,null,null,null));l.default=h.exports}}]);